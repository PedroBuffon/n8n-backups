{
  "active": true,
  "connections": {
    "HTTP Request": {
      "main": [
        [
          {
            "node": "HTML Extract",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTML Extract": {
      "main": [
        [
          {
            "node": "Set",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Discord Send",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter Anime News": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Only get new RSS": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          },
          {
            "node": "Filter Anime News",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RSS Read": {
      "main": [
        [
          {
            "node": "Only get new RSS",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "RSS Read",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2023-12-19T12:52:15.810Z",
  "id": "xuIQ3YQHLp35HJeh",
  "meta": null,
  "name": "Anime News",
  "nodes": [
    {
      "parameters": {
        "keepOnlySet": true,
        "values": {
          "string": [
            {
              "name": "imgURL",
              "value": "={{  $json[\"imgURL\"][5]  }}"
            }
          ]
        },
        "options": {}
      },
      "id": "bb2926cd-614a-4cb4-9b0f-881dcc2f3d68",
      "name": "Set",
      "type": "n8n-nodes-base.set",
      "typeVersion": 1,
      "position": [
        840,
        460
      ]
    },
    {
      "parameters": {
        "url": "={{ $json[\"guid\"] }}",
        "responseFormat": "string",
        "jsonParameters": true,
        "options": {
          "batchInterval": 1000
        }
      },
      "name": "HTTP Request",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        460,
        460
      ],
      "typeVersion": 1,
      "id": "aae571c1-bce5-49d8-b38f-b06a597f9aa0"
    },
    {
      "parameters": {
        "extractionValues": {
          "values": [
            {
              "key": "imgURL",
              "cssSelector": "link",
              "returnValue": "attribute",
              "attribute": "href",
              "returnArray": true
            }
          ]
        },
        "options": {}
      },
      "name": "HTML Extract",
      "type": "n8n-nodes-base.htmlExtract",
      "position": [
        660,
        460
      ],
      "typeVersion": 1,
      "id": "acee1581-c781-42d7-bcf7-dfd2f319383a"
    },
    {
      "parameters": {
        "mode": "combine",
        "combinationMode": "mergeByPosition",
        "options": {}
      },
      "id": "53ced00e-6418-4020-883a-6c82f57e5e0e",
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2,
      "position": [
        1020,
        620
      ],
      "retryOnFail": false
    },
    {
      "parameters": {
        "keepOnlySet": true,
        "values": {
          "string": [
            {
              "name": "title",
              "value": "={{ $json[\"title\"] }}"
            },
            {
              "name": "link",
              "value": "={{ $json[\"link\"] }}"
            },
            {
              "name": "Date",
              "value": "={{ $json[\"isoDate\"] }}"
            },
            {
              "name": "contentSnippet",
              "value": "={{ $json[\"contentSnippet\"] }}"
            },
            {
              "name": "guid",
              "value": "={{ $json[\"guid\"] }}"
            },
            {
              "name": "categories",
              "value": "={{ $json[\"categories\"] }}"
            }
          ]
        },
        "options": {
          "dotNotation": true
        }
      },
      "id": "5919697e-f562-4503-9aed-f6c9158027bf",
      "name": "Filter Anime News",
      "type": "n8n-nodes-base.set",
      "typeVersion": 1,
      "position": [
        460,
        640
      ]
    },
    {
      "parameters": {
        "functionCode": "const staticData = getWorkflowStaticData('global');\nconst newRSSIds = items.map(item => item.json[\"pubDate\"]);\nconst oldRSSIds = staticData.oldRSSIds; \n\nif (!oldRSSIds) {\n  staticData.oldRSSIds = newRSSIds;\n  return items;\n}\n\n\nconst actualNewRSSIds = newRSSIds.filter((id) => !oldRSSIds.includes(id));\nconst actualNewRSS = items.filter((data) => actualNewRSSIds.includes(data.json['pubDate']));\nstaticData.oldRSSIds = [...actualNewRSSIds, ...oldRSSIds];\n\nreturn actualNewRSS;\n"
      },
      "name": "Only get new RSS",
      "type": "n8n-nodes-base.function",
      "position": [
        140,
        560
      ],
      "typeVersion": 1,
      "id": "d1a13d93-3c3e-400f-8a10-7d785da9f772"
    },
    {
      "parameters": {
        "url": "https://www.animenewsnetwork.com/news/rss.xml?ann-edition=us",
        "options": {}
      },
      "id": "809051bf-fbb7-4047-aad3-d8376d1250ab",
      "name": "RSS Read",
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1,
      "position": [
        -40,
        560
      ]
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "*/30 * * * *"
            }
          ]
        }
      },
      "id": "de38c239-6622-426f-9c04-a6bcbdca33b8",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1,
      "position": [
        -220,
        560
      ]
    },
    {
      "parameters": {
        "channelId": "1058807311877034124",
        "embed": true,
        "title": "={{ $json[\"title\"] }}",
        "url": "={{ $json[\"link\"] }}",
        "authorName": "=Anime News Network | Category: {{ $json[\"categories\"][0]}}",
        "authorUrl": "https://www.animenewsnetwork.com/",
        "description": "={{ $json[\"contentSnippet\"] }}",
        "imageUrl": "={{ $json[\"imgURL\"] }}",
        "footerText": "Powered By n8n",
        "timestamp": "={{ $json[\"Date\"] }}",
        "botCustomization": true,
        "botActivity": "Nothing",
        "botActivityType": 3
      },
      "id": "10fe5630-20d1-4365-a876-53a083cc031e",
      "name": "Discord Send",
      "type": "n8n-nodes-discord-fork.discord",
      "typeVersion": 1,
      "position": [
        1240,
        620
      ],
      "credentials": {
        "discordApi": {
          "id": "pMpClPZ0113ZS7QO",
          "name": "Discord App account"
        }
      }
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1",
    "timezone": "America/Sao_Paulo",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "e5gs9CPtjGB5lx52"
  },
  "staticData": {
    "node:Schedule Trigger": {
      "recurrencyRules": []
    },
    "global": {
      "oldRSSIds": [
        "Wed, 20 Dec 2023 20:46:00 -0500",
        "Wed, 20 Dec 2023 20:01:27 -0500",
        "Wed, 20 Dec 2023 19:32:58 -0500",
        "Wed, 20 Dec 2023 19:00:00 -0500",
        "Wed, 20 Dec 2023 18:00:00 -0500",
        "Wed, 20 Dec 2023 17:00:00 -0500",
        "Wed, 20 Dec 2023 16:00:00 -0500",
        "Wed, 20 Dec 2023 15:00:00 -0500",
        "Wed, 20 Dec 2023 14:30:00 -0500",
        "Wed, 20 Dec 2023 14:00:00 -0500",
        "Wed, 20 Dec 2023 13:13:44 -0500",
        "Wed, 20 Dec 2023 12:28:37 -0500",
        "Wed, 20 Dec 2023 11:24:45 -0500",
        "Wed, 20 Dec 2023 11:00:00 -0500",
        "Wed, 20 Dec 2023 10:27:46 -0500",
        "Wed, 20 Dec 2023 10:00:10 -0500",
        "Tue, 19 Dec 2023 21:37:11 -0500",
        "Tue, 19 Dec 2023 20:40:02 -0500",
        "Tue, 19 Dec 2023 20:37:44 -0500",
        "Tue, 19 Dec 2023 19:35:06 -0500",
        "Tue, 19 Dec 2023 17:00:00 -0500",
        "Tue, 19 Dec 2023 16:30:00 -0500",
        "Tue, 19 Dec 2023 16:00:00 -0500",
        "Tue, 19 Dec 2023 15:00:00 -0500",
        "Tue, 19 Dec 2023 14:40:24 -0500",
        "Tue, 19 Dec 2023 13:45:00 -0500",
        "Tue, 19 Dec 2023 13:00:00 -0500",
        "Tue, 19 Dec 2023 12:00:00 -0500",
        "Tue, 19 Dec 2023 11:00:00 -0500",
        "Tue, 19 Dec 2023 09:57:11 -0500",
        "Tue, 19 Dec 2023 01:32:47 -0500",
        "Mon, 18 Dec 2023 22:57:47 -0500",
        "Mon, 18 Dec 2023 19:10:40 -0500",
        "Mon, 18 Dec 2023 15:20:57 -0500",
        "Mon, 18 Dec 2023 12:34:44 -0500",
        "Mon, 18 Dec 2023 11:30:25 -0500",
        "Mon, 18 Dec 2023 09:00:00 -0500",
        "Mon, 18 Dec 2023 08:00:00 -0500",
        "Mon, 18 Dec 2023 07:06:20 -0500",
        "Mon, 18 Dec 2023 04:30:00 -0500",
        "Mon, 18 Dec 2023 04:00:00 -0500",
        "Mon, 18 Dec 2023 03:30:00 -0500",
        "Mon, 18 Dec 2023 03:00:00 -0500",
        "Mon, 18 Dec 2023 02:30:00 -0500",
        "Mon, 18 Dec 2023 01:45:19 -0500",
        "Mon, 18 Dec 2023 01:34:10 -0500",
        "Mon, 18 Dec 2023 01:21:28 -0500",
        "Mon, 18 Dec 2023 01:07:21 -0500",
        "Mon, 18 Dec 2023 00:48:46 -0500",
        "Sun, 17 Dec 2023 22:12:59 -0500",
        "Sun, 17 Dec 2023 19:09:52 -0500",
        "Sun, 17 Dec 2023 19:04:37 -0500",
        "Sun, 17 Dec 2023 15:00:00 -0500",
        "Sun, 17 Dec 2023 13:00:00 -0500",
        "Sun, 17 Dec 2023 05:00:00 -0500",
        "Sun, 17 Dec 2023 04:41:19 -0500",
        "Sun, 17 Dec 2023 04:26:09 -0500",
        "Sun, 17 Dec 2023 04:12:49 -0500",
        "Sun, 17 Dec 2023 04:09:45 -0500",
        "Sun, 17 Dec 2023 03:25:28 -0500",
        "Sun, 17 Dec 2023 02:36:12 -0500",
        "Sun, 17 Dec 2023 01:43:36 -0500",
        "Sun, 17 Dec 2023 01:27:43 -0500",
        "Sun, 17 Dec 2023 00:42:11 -0500",
        "Sat, 16 Dec 2023 23:47:03 -0500",
        "Sat, 16 Dec 2023 23:26:54 -0500",
        "Sat, 16 Dec 2023 23:22:10 -0500",
        "Sat, 16 Dec 2023 23:10:18 -0500",
        "Sat, 16 Dec 2023 22:46:45 -0500",
        "Sat, 16 Dec 2023 22:12:48 -0500"
      ]
    }
  },
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2023-12-21T03:00:04.984Z",
  "versionId": "fb3aff55-25e0-4650-859b-a202d79ab3e8"
}